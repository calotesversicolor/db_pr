# Тема: Интернет магазин спортивных товаров 

![image](https://github.com/calotesversicolor/db_pr/assets/78222610/1e706ef9-0913-4549-8ee3-0d359030e647)

## Создание таблиц

```sql
CREATE TABLE clients (
	id bigint primary key,
	first_name varchar(50) not null,
	last_name varchar(70) not null,
	age integer null default 16,
	address varchar(100)
);
```

```sql
CREATE TABLE saved_credit_cards (
	id bigint primary key,
	card_number integer not null,
	validity_period date not null,
	verif_code integer not null,
	person_id bigint not null,
	constraint fk_scc_person_id foreign key (person_id) references clients(id)
);
```

```sql
CREATE TABLE category(
	id bigint primary key,
	category_title varchar not null,
	parent_id bigint,
	constraint fk_category_parent_id foreign key (parent_id) references category(id)
);
```

```sql
CREATE TABLE brand (
	id bigint primary key,
	brand_title varchar not null
);
```

```sql
CREATE TABLE brand_category(
	brand_id bigint,
	category_id bigint,
	constraint fk_bc_brand_id foreign key (brand_id) references brand(id),
	constraint fk_bc_category_id foreign key (category_id) references category(id)
);
```

```sql
CREATE TABLE products (
	article varchar primary key,
	product_name varchar not null,
	category_id bigint not null,
	brand_id bigint not null,
	constraint fk_products_brand_id foreign key (brand_id) references brand(id),
	constraint fk_products_category_id foreign key (category_id) references category(id)
);
```

```sql
CREATE TABLE shopping_cart (
	id bigint primary key,
	person_id bigint not null,
	article varchar not null,
	quantity integer not null,
	total_sum float not null,
	constraint fk_sc_person_id foreign key (person_id) references clients(id),
	constraint fk_sc_article foreign key (article) references products(article)
);
```

```sql
CREATE TABLE order_status (
	id bigint primary key,
	status varchar not null
);
```

```sql
CREATE TABLE del_time_period (
	id bigint primary key,
	time_period integer not null,
	region varchar not null
);
```

```sql
CREATE TABLE orders (
	id bigint primary key,
	person_id bigint not null,
	order_date date not null,
	delivery_date date,
	id_time_period bigint not null,
	status_id bigint not null,
	cart_id bigint not null,
	card_id bigint,
	constraint fk_orders_person_id foreign key (person_id) references clients(id),
	constraint fk_orders_id_time_period foreign key (id_time_period) references del_time_period(id),
	constraint fk_orders_status_id foreign key (status_id) references order_status(id),
	constraint fk_orders_cart_id foreign key (cart_id) references shopping_cart(id),
	constraint fk_orders_card_id foreign key (card_id) references saved_credit_cards(id)
);
```

```sql
CREATE TABLE order_details (
	id bigint primary key,
	order_id bigint not null,
	article varchar not null,
	quantity integer not null,
	description text,
	constraint fk_order_details_order_id foreign key (order_id) references orders(id)
);
```

## Добавление значений

```sql
insert into brand values (1, 'Nike');
insert into brand values (2, 'Adidas');
insert into brand values (3, 'Puma');
insert into brand values (4, 'Under Armour');
insert into brand values (5, 'Reebok');
insert into brand values (6, 'New Balance');
insert into brand values (7, 'Asics Tiger');
```
